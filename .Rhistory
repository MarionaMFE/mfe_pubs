filter(year != 'X') %>%
mutate(year = as.numeric(str_remove(year, 'X'))) %>%
select (-co2) -> spread_table
data_long <- melt(spread_table, id = 'year')
ggplot(kaya, aes(x = X, y = X1997)) +
geom_point() +
theme_mfe()
# setup named list of MfE colours
mfe_colors <- list(
"dark_blue" = "#1C556C",
"blue" = "#32809C",
"dark_green" = "#0F7B7D",
"light_green" = "#2C9986",
"turquoise" = "#6FC7B7" ,
"brown" = "#8B391D",
"orange"= "#DA5A28"
)
# created branded palette function
mfe_pal <- function(
primary = "blue",
other = "grey",
direction = 1
) {
stopifnot(primary %in% names(mfe_colors))
function(n) {
if (n > 7) warning("MfE Color Palette only has 7 colors.")
if (n == 2) {
other <- if (!other %in% names(mfe_colors)) {
other
} else {
mfe_colors[other]
}
color_list <- c(other, mfe_colors[primary])
} else {
if (direction >= 0) {color_list <- mfe_colors[1:n]} else { color_list<- tail(mfe_colors,n)}
}
color_list <- unname(unlist(color_list))
color_list
}
}
# setup ggplot colour scale
scale_colour_branded <- function(
primary = "dark_blue",
other = "orange",
direction = 1,
...
) {
ggplot2::discrete_scale(
"colour", "branded",
branded_pal(primary, other, direction),
...
)
}
# by convention colour also spelled without U.
scale_color_branded <- scale_colour_branded
mfe_colors()2
mfe_colors()(2)
mfe_pal()(2)
# created branded palette function
mfe_pal <- function(
primary = "dark_green",
other = "orange",
direction = 1
) {
stopifnot(primary %in% names(mfe_colors))
function(n) {
if (n > 7) warning("MfE Color Palette only has 7 colors.")
if (n == 2) {
other <- if (!other %in% names(mfe_colors)) {
other
} else {
mfe_colors[other]
}
color_list <- c(other, mfe_colors[primary])
} else {
if (direction >= 0) {color_list <- mfe_colors[1:n]} else { color_list<- tail(mfe_colors,n)}
}
color_list <- unname(unlist(color_list))
color_list
}
}
# setup ggplot colour scale
scale_colour_branded <- function(
primary = "dark_blue",
other = "orange",
direction = 1,
...
) {
ggplot2::discrete_scale(
"colour", "branded",
branded_pal(primary, other, direction),
...
)
}
# by convention colour also spelled without U.
scale_color_branded <- scale_colour_branded
mfe_pal()(2)
mfe_pal(other = 'green')(2)
mfe_pal()(3)
mfe_pal(direction = -1)(3)
mfe_pal()(2)
mfe_pal(other = 'dark_green')(2)
mfe_pal()(3)
mfe_pal(direction = -1)(3)
library(ggplot2)
library(tidyverse)
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-"
)
kayaplot +
theme_mfe() +
scale_color_mfe(direction = -1)
library(ggplot2)
library(tidyverse)
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-"
)
library(mfePubs)
library(tidyverse)
library(reshape2)
library(tidyverse)
library(lubridate)
# load the kaya dataset attached with mfePubs package
data(kaya)
# tidy data (transpose it)
kaya %>%
rownames_to_column %>%
gather(variable, value, -rowname) %>%
spread(rowname, value) -> spread_table
# change variable names
names(spread_table) <- c('year', 'population', 'gdp_per_capita', 'co2', 'energy_per_gdp', 'co2_per_energy')
# remove first line and make 'year' a numeric variable
spread_table %>%
filter(year != 'X') %>%
mutate(year = as.numeric(str_remove(year, 'X'))) %>%
select (-co2) -> spread_table
data_long <- melt(spread_table, id = 'year')
kayaplot <- ggplot(data_long, aes(x = year, y = as.numeric(value), colour = variable)) +
geom_line(size = 1.5) +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5)
kayaplot
kayaplot + theme_mfe()
kayaplot +
theme_mfe() +
scale_color_mfe(direction = -1)
# Isaac Bain: Easier way to use MfE colours in ggplot2
# Inspiration from: https://www.garrickadenbuie.com/blog/custom-discrete-color-scales-for-ggplot2/
# Mariona Roige: Have changed branded_pal function to add some user functionality to it
# a- direction change from the other side of the palette
# to use when looking for high contrasting colors. The blue side of the palette
# is not distinguishible enough to the eye.
# setup named list of MfE colours
mfe_colors <- list(
"dark_blue" = "#1C556C",
"blue" = "#32809C",
"dark_green" = "#0F7B7D",
"light_green" = "#2C9986",
"turquoise" = "#6FC7B7" ,
"brown" = "#8B391D",
"orange"= "#DA5A28"
)
# created branded palette function
mfe_pal <- function(
primary = "dark_green",
other = "orange",
direction = 1
) {
stopifnot(primary %in% names(mfe_colors))
function(n) {
if (n > 7) warning("MfE Color Palette only has 7 colors.")
if (n == 2) {
other <- if (!other %in% names(mfe_colors)) {
other
} else {
mfe_colors[other]
}
color_list <- c(other, mfe_colors[primary])
} else {
if (direction >= 0) {color_list <- mfe_colors[1:n]} else { color_list<- tail(mfe_colors,n)}
}
color_list <- unname(unlist(color_list))
color_list
}
}
# setup ggplot colour scale
scale_colour_mfe <- function(
primary = "dark_blue",
other = "orange",
direction = 1,
...
) {
ggplot2::discrete_scale(
"colour", "branded",
mfe_pal(primary, other, direction),
...
)
}
# by convention colour also spelled without U.
scale_color_mfe <- scale_colour_mfe
mfe_pal()(2)
mfe_pal(other = 'dark_green')(2)
mfe_pal()(3)
mfe_pal(direction = -1)(3)
kayaplot +
theme_mfe() +
scale_color_mfe(direction = -1)
getwd()
devtools::document()
kayaplot +
theme_mfe() +
scale_color_viridis()
library(ggplot2)
library(tidyverse)
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-"
)
library(mfePubs)
library(tidyverse)
library(reshape2)
library(tidyverse)
library(lubridate)
# load the kaya dataset attached with mfePubs package
data(kaya)
# tidy data (transpose it)
kaya %>%
rownames_to_column %>%
gather(variable, value, -rowname) %>%
spread(rowname, value) -> spread_table
# change variable names
names(spread_table) <- c('year', 'population', 'gdp_per_capita', 'co2', 'energy_per_gdp', 'co2_per_energy')
# remove first line and make 'year' a numeric variable
spread_table %>%
filter(year != 'X') %>%
mutate(year = as.numeric(str_remove(year, 'X'))) %>%
select (-co2) -> spread_table
data_long <- melt(spread_table, id = 'year')
kayaplot <- ggplot(data_long, aes(x = year, y = as.numeric(value), colour = variable)) +
geom_line(size = 1.5) +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5)
kayaplot
kayaplot + theme_mfe()
kayaplot +
theme_mfe() +
scale_color_viridis()
library(viridis)
kayaplot +
theme_mfe() +
scale_color_viridis()
kayaplot +
theme_mfe() +
scale_color_viridis_d()
kayaplot +
theme_mfe() +
scale_color_viridis_c()
kayaplot +
theme_mfe() +
scale_color_mfe()
kayaplot +
theme_mfe() +
scale_color_mfe(direction = -1)
kayaplot +
theme_mfe() +
scale_color_mfe(direction = -1854)
getwd()
setwd('..')
getwd()
devtools::install(mfePubs)
devtools::install('mfePubs')
getwd()
setwd('./mfePubs')
getwd()
devtools::install()
devtools::document()
getwd()
devtools::document()
getwd()
devtools::document()
devtools::document()
kayaplot +
#theme_mfe() +
#scale_color_mfe(direction = -1)
kayaplot #+
#theme_mfe() +
#scale_color_mfe(direction = -1)
devtools::document()
getwd()
devtools::document()
debug(devtools::document())
document()
devtools::document()
getAnyWhere(devtools::document())
devtools::document()
devtools::document()
devtools::document()
devtools::document()
roxygen2::roxygenise()
roxygenise()
devtools::document()
getwd()
setwd('..')
devtools:install(mfePubs)
devtools::install(mfePubs)
devtools::install('mfePubs')
?scale_color_mfe
library(mfePubs)
?scale_colour_mfe
library(ggplot2)
library(tidyverse)
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>",
fig.path = "man/figures/README-"
)
library(mfePubs)
library(tidyverse)
library(reshape2)
library(tidyverse)
library(lubridate)
# load the kaya dataset attached with mfePubs package
data(kaya)
# tidy data (transpose it)
kaya %>%
rownames_to_column %>%
gather(variable, value, -rowname) %>%
spread(rowname, value) -> spread_table
# change variable names
names(spread_table) <- c('year', 'population', 'gdp_per_capita', 'co2', 'energy_per_gdp', 'co2_per_energy')
# remove first line and make 'year' a numeric variable
spread_table %>%
filter(year != 'X') %>%
mutate(year = as.numeric(str_remove(year, 'X'))) %>%
select (-co2) -> spread_table
data_long <- melt(spread_table, id = 'year')
kayaplot <- ggplot(data_long, aes(x = year, y = as.numeric(value), colour = variable)) +
geom_line(size = 1.5) +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5)
kayaplot
kayaplot + theme_mfe()
kayaplot +
theme_mfe() +
scale_color_branded()
kayaplot +
theme_mfe() +
scale_color_mfe()
kayaplot +
theme_mfe() +
scale_colour_mfe()
kayaplot +
theme_mfe() +
scale_colour_mfe(direction = -1)
mfe_pal()(5)
mfe_colours
mfe_colours
getwd()
setwd('/mfePubs')
setwd('./mfePubs')
devtools::document()
setwd("..")
devtools::install('mfePubs')
library(mfePubs)
kayaplot + theme_mfe()
kayaplot +
theme_mfe() +
scale_colour_mfe(direction = -1)
getwd()
setwd('./mfePubs')
devtools::document()
setwd('..')
devtools::install('mfePubs')
library(mfePubs)
kayaplot +
theme_mfe() +
scale_colour_mfe(direction = -1)
kayaplot +
theme_mfe() +
scale_colour_mfe(direction = -1)
ggplot(data_long, aes(x = year, y = as.numeric(value), colour = variable)) +
geom_boxplot() +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5)
ggplot(data_long, aes(x = year, y = as.numeric(value), colour = variable)) +
geom_boxplot()
ggplot(data_long, aes(x = year, y = as.numeric(value), colour = variable)) +
geom_boxplot() +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year')
ggplot(data_long, aes(x = year, y = as.numeric(value), colour = variable)) +
geom_bar()
ggplot(data_long, aes(x = year, y = as.numeric(value), colour = variable)) +
geom_col()
ggplot(data_long, aes(x = year, y = as.numeric(value), colour = variable)) +
geom_col(aes( y = value))
ggplot(data_long, aes(x = year, y = as.numeric(value), colour = variable)) +
geom_col()
ggplot(data_long, aes(x = year, y = as.numeric(value), colour = variable)) +
geom_col() +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5)
ggplot(data_long, aes(x = year, y = as.numeric(value), fill = variable)) +
geom_col() +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5)
ggplot(data_long, aes(x = year, y = as.numeric(value), fill = variable)) +
geom_col() +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5) +
theme_mfe()
ggplot(data_long, aes(x = year, y = as.numeric(value), fill = variable)) +
geom_col() +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5) +
theme_mfe() +
scale_fill_mfe()
ggplot(data_long, aes(x = year, y = as.numeric(value), fill = variable)) +
geom_col() +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5) +
theme_mfe() +
scale_fill_mfe(direction = -1)
mfe_colours
image(volcano, col = mfe_colours)
mfe_colours
image(volcano, col = unname(unlist(mfe_colours))
image(volcano, col = unname(unlist(mfe_colours)))
kaya_barplot <- ggplot(data_long, aes(x = year, y = as.numeric(value), fill = variable)) +
geom_col() +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5) +
theme_mfe() +
scale_fill_manual(values = c('dark_blue', 'turquoise', 'brown', 'light_green'))
kaya_barplot
ggplot(data_long, aes(x = year, y = as.numeric(value), fill = variable)) +
geom_col() +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5) +
theme_mfe() +
scale_fill_manual(values = c('mfe_colours$dark_blue', 'mfe_colours$turquoise', 'mfe_colours$brown', 'mfe_colours$light_green'))
mfe_colours$dark_blue
ggplot(data_long, aes(x = year, y = as.numeric(value), fill = variable)) +
geom_col() +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5) +
theme_mfe() +
scale_fill_manual(values = c(mfe_colours$dark_blue, mfe_colours$turquoise, mfe_colours$brown, mfe_colours$light_green))
mfe_colours
image(volcano, col = unname(unlist(mfe_colours)))
kaya_barplot_custom <- ggplot(data_long, aes(x = year, y = as.numeric(value), fill = variable)) +
geom_col() +
ggtitle('Kaya identity, New Zealand, 1990-2018') +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5) +
theme_mfe() +
scale_fill_manual(values = c(mfe_colours$dark_blue, mfe_colours$turquoise, mfe_colours$brown, mfe_colours$light_green))
kaya_barplot_custom
print(mfe_colours)
paste0('Kaya identity, New Zealand,', format_num(1990),'-', format_num(2018)
)
kaya_barplot_custom <- ggplot(data_long, aes(x = year, y = as.numeric(value), fill = variable)) +
geom_col() +
ggtitle(paste0('Kaya identity, New Zealand, ', format_num(1990),'-', format_num(2018)) +
ylab('base 100') +
xlab('year') +
scale_x_continuous(n.breaks=length(unique(data_long$year))/5) +
theme_mfe() +
scale_fill_mfe(direction = -1)
kaya_barplot_custom
getwd()
setwd('./mfePubs')
getwd()
devtools::document()
setwd('..')
devtools::install()
devtools::install('mfePubs')
library(mfePubs)
?format_num
library(mfePubs)
?format_num
